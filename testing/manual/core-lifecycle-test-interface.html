<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core Study Lifecycle Test - Live Execution</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            line-height: 1.6;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5em;
        }
        h2 {
            color: #FFD700;
            border-bottom: 2px solid #FFD700;
            padding-bottom: 10px;
        }
        .phase {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        .phase.active {
            border-left-color: #FF9800;
            background: rgba(255, 152, 0, 0.2);
        }
        .phase.completed {
            border-left-color: #4CAF50;
            background: rgba(76, 175, 80, 0.2);
        }
        .phase.failed {
            border-left-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }
        .checklist {
            margin: 15px 0;
        }
        .checklist input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .checklist label {
            cursor: pointer;
            padding: 5px;
            border-radius: 3px;
            transition: background 0.3s;
        }
        .checklist label:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .timer {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 1.2em;
            margin: 10px 0;
        }
        .config {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 10px 0;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background: #45a049;
        }
        button.warning {
            background: #ff9800;
        }
        button.danger {
            background: #f44336;
        }
        .evidence {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .notes {
            width: 100%;
            min-height: 60px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-family: inherit;
            resize: vertical;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
            text-align: center;
        }
        .success {
            background: rgba(76, 175, 80, 0.3);
        }
        .warning {
            background: rgba(255, 152, 0, 0.3);
        }
        .error {
            background: rgba(244, 67, 54, 0.3);
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #FFD700;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ Core Study Lifecycle Test - Live Execution</h1>
        
        <div class="status success">
            <strong>Test Date:</strong> September 3, 2025 | 
            <strong>Platform:</strong> https://researchhub-saas.vercel.app | 
            <strong>Status:</strong> <span id="overallStatus">Ready to Start</span>
        </div>
        
        <div class="timer" id="overallTimer">
            Overall Test Time: 00:00:00
        </div>
        
        <div class="config">
            <strong>Test Accounts:</strong><br>
            üî¨ Researcher: abwanwr77+researcher@gmail.com / Testtest123<br>
            üë• Participant: abwanwr77+participant@gmail.com / Testtest123<br><br>
            
            <strong>Study Configuration:</strong><br>
            üìã Title: "Mobile App Navigation Study - Sept 3"<br>
            üéØ Type: Usability Test<br>
            üë• Target: 3 participants | ‚è±Ô∏è Duration: 15 min | üí∞ Compensation: $15
        </div>

        <div class="metrics">
            <div class="metric">
                <div class="metric-value" id="phase1Time">00:00</div>
                <div>Phase 1 Time</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="phase2Time">00:00</div>
                <div>Phase 2 Time</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="phase3Time">00:00</div>
                <div>Phase 3 Time</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="phase4Time">00:00</div>
                <div>Phase 4 Time</div>
            </div>
        </div>

        <!-- PHASE 1: RESEARCHER STUDY CREATION -->
        <div class="phase" id="phase1">
            <h2>üéØ PHASE 1: RESEARCHER STUDY CREATION</h2>
            <div class="timer" id="phase1Timer">Phase 1 Time: 00:00:00</div>
            
            <button onclick="startPhase(1)">üöÄ Start Phase 1</button>
            <button onclick="completePhase(1)" class="warning">‚úÖ Complete Phase 1</button>
            
            <h3>1.1 Study Creation & Configuration</h3>
            <div class="checklist">
                <label><input type="checkbox" data-step="1.1.1"> Login to researcher account successfully</label><br>
                <label><input type="checkbox" data-step="1.1.2"> Navigate to "Create New Study" section</label><br>
                <label><input type="checkbox" data-step="1.1.3"> Enter study title: "Mobile App Navigation Study - Sept 3"</label><br>
                <label><input type="checkbox" data-step="1.1.4"> Set study type: Usability Test</label><br>
                <label><input type="checkbox" data-step="1.1.5"> Add description and study parameters</label><br>
            </div>
            
            <h3>1.2 Block Configuration (5 blocks required)</h3>
            <div class="checklist">
                <label><input type="checkbox" data-step="1.2.1"> ‚úÖ Welcome Block: "Welcome to Our Study" + consent checkbox</label><br>
                <label><input type="checkbox" data-step="1.2.2"> ‚úÖ Instructions Block: "Task Instructions" + app guidelines</label><br>
                <label><input type="checkbox" data-step="1.2.3"> ‚úÖ Task Block: "Navigation Task" + find settings page</label><br>
                <label><input type="checkbox" data-step="1.2.4"> ‚úÖ Feedback Block: "Post-Task Questions" + 3 rating questions</label><br>
                <label><input type="checkbox" data-step="1.2.5"> ‚úÖ Thank You Block: "Thank You!" + completion message</label><br>
            </div>
            
            <h3>1.3 Study Launch</h3>
            <div class="checklist">
                <label><input type="checkbox" data-step="1.3.1"> Study preview shows all blocks correctly</label><br>
                <label><input type="checkbox" data-step="1.3.2"> Save study as draft successfully</label><br>
                <label><input type="checkbox" data-step="1.3.3"> Launch study (Draft ‚Üí Active status)</label><br>
                <label><input type="checkbox" data-step="1.3.4"> Study URL generated and accessible</label><br>
                <label><input type="checkbox" data-step="1.3.5"> Public study page displays correctly</label><br>
            </div>
            
            <h3>üì∏ Evidence Package (Phase 1)</h3>
            <div class="evidence">
                <label><input type="checkbox" data-evidence="1.1"> Study builder interface screenshot</label><br>
                <label><input type="checkbox" data-evidence="1.2"> Each block configuration screenshot (5 total)</label><br>
                <label><input type="checkbox" data-evidence="1.3"> Study preview/summary screenshot</label><br>
                <label><input type="checkbox" data-evidence="1.4"> Study launch confirmation screenshot</label><br>
                <label><input type="checkbox" data-evidence="1.5"> Generated study URL and public page screenshot</label><br>
            </div>
            
            <div>
                <strong>Study URL Generated:</strong>
                <input type="text" id="studyUrl" placeholder="Paste study URL here..." style="width: 100%; padding: 5px; margin: 5px 0;">
            </div>
            
            <textarea class="notes" placeholder="Phase 1 notes, issues, and observations..."></textarea>
        </div>

        <!-- PHASE 2: PARTICIPANT EXPERIENCE -->
        <div class="phase" id="phase2">
            <h2>üë• PHASE 2: PARTICIPANT EXPERIENCE</h2>
            <div class="timer" id="phase2Timer">Phase 2 Time: 00:00:00</div>
            
            <button onclick="startPhase(2)">üöÄ Start Phase 2</button>
            <button onclick="completePhase(2)" class="warning">‚úÖ Complete Phase 2</button>
            
            <div class="status warning">
                <strong>‚ö†Ô∏è Important:</strong> Use incognito/private browser window for participant testing
            </div>
            
            <h3>2.1 Study Discovery & Application</h3>
            <div class="checklist">
                <label><input type="checkbox" data-step="2.1.1"> Open incognito browser window</label><br>
                <label><input type="checkbox" data-step="2.1.2"> Login to participant account</label><br>
                <label><input type="checkbox" data-step="2.1.3"> Navigate to participant dashboard</label><br>
                <label><input type="checkbox" data-step="2.1.4"> Locate study in available studies list</label><br>
                <label><input type="checkbox" data-step="2.1.5"> Access study details page</label><br>
                <label><input type="checkbox" data-step="2.1.6"> Complete study application process</label><br>
                <label><input type="checkbox" data-step="2.1.7"> Receive application confirmation</label><br>
            </div>
            
            <h3>2.2 Study Completion (After Researcher Accepts Application)</h3>
            <div class="checklist">
                <label><input type="checkbox" data-step="2.2.1"> Access study via provided URL or dashboard</label><br>
                <label><input type="checkbox" data-step="2.2.2"> Complete Welcome Block (consent & info)</label><br>
                <label><input type="checkbox" data-step="2.2.3"> Complete Instructions Block (read guidelines)</label><br>
                <label><input type="checkbox" data-step="2.2.4"> Complete Task Block (navigation task)</label><br>
                <label><input type="checkbox" data-step="2.2.5"> Complete Feedback Block (answer all questions)</label><br>
                <label><input type="checkbox" data-step="2.2.6"> Reach Thank You Block (study completion)</label><br>
            </div>
            
            <h3>üì∏ Evidence Package (Phase 2)</h3>
            <div class="evidence">
                <label><input type="checkbox" data-evidence="2.1"> Participant dashboard with study listing</label><br>
                <label><input type="checkbox" data-evidence="2.2"> Study details page (participant view)</label><br>
                <label><input type="checkbox" data-evidence="2.3"> Application form and confirmation</label><br>
                <label><input type="checkbox" data-evidence="2.4"> Each study block during completion (5 screenshots)</label><br>
                <label><input type="checkbox" data-evidence="2.5"> Study completion confirmation</label><br>
            </div>
            
            <div>
                <strong>Application ID:</strong>
                <input type="text" id="applicationId" placeholder="Note application ID here..." style="width: 100%; padding: 5px; margin: 5px 0;">
            </div>
            
            <textarea class="notes" placeholder="Phase 2 notes, participant experience feedback..."></textarea>
        </div>

        <!-- PHASE 3: APPLICATION MANAGEMENT -->
        <div class="phase" id="phase3">
            <h2>üìã PHASE 3: APPLICATION MANAGEMENT</h2>
            <div class="timer" id="phase3Timer">Phase 3 Time: 00:00:00</div>
            
            <button onclick="startPhase(3)">üöÄ Start Phase 3</button>
            <button onclick="completePhase(3)" class="warning">‚úÖ Complete Phase 3</button>
            
            <h3>3.1 Application Review & Acceptance</h3>
            <div class="checklist">
                <label><input type="checkbox" data-step="3.1.1"> Return to researcher account (close incognito)</label><br>
                <label><input type="checkbox" data-step="3.1.2"> Navigate to study applications/participants section</label><br>
                <label><input type="checkbox" data-step="3.1.3"> Locate submitted participant application</label><br>
                <label><input type="checkbox" data-step="3.1.4"> Review application details and qualifications</label><br>
                <label><input type="checkbox" data-step="3.1.5"> Accept the participant application</label><br>
                <label><input type="checkbox" data-step="3.1.6"> Verify acceptance notification sent</label><br>
                <label><input type="checkbox" data-step="3.1.7"> Confirm participant receives study access</label><br>
            </div>
            
            <h3>üì∏ Evidence Package (Phase 3)</h3>
            <div class="evidence">
                <label><input type="checkbox" data-evidence="3.1"> Applications list screenshot</label><br>
                <label><input type="checkbox" data-evidence="3.2"> Individual application details</label><br>
                <label><input type="checkbox" data-evidence="3.3"> Accept application action screenshot</label><br>
                <label><input type="checkbox" data-evidence="3.4"> Acceptance confirmation</label><br>
            </div>
            
            <textarea class="notes" placeholder="Phase 3 notes, application management observations..."></textarea>
        </div>

        <!-- PHASE 4: RESPONSE ANALYSIS -->
        <div class="phase" id="phase4">
            <h2>üìä PHASE 4: RESPONSE ANALYSIS</h2>
            <div class="timer" id="phase4Timer">Phase 4 Time: 00:00:00</div>
            
            <button onclick="startPhase(4)">üöÄ Start Phase 4</button>
            <button onclick="completePhase(4)" class="warning">‚úÖ Complete Phase 4</button>
            
            <h3>4.1 Response Access & Analysis</h3>
            <div class="checklist">
                <label><input type="checkbox" data-step="4.1.1"> Navigate to study results/responses section</label><br>
                <label><input type="checkbox" data-step="4.1.2"> Locate completed participant responses</label><br>
                <label><input type="checkbox" data-step="4.1.3"> Access individual response details</label><br>
                <label><input type="checkbox" data-step="4.1.4"> Review task completion data</label><br>
                <label><input type="checkbox" data-step="4.1.5"> Analyze feedback question responses</label><br>
                <label><input type="checkbox" data-step="4.1.6"> Check response timestamps and duration</label><br>
                <label><input type="checkbox" data-step="4.1.7"> Test data export functionality (if available)</label><br>
            </div>
            
            <h3>üì∏ Evidence Package (Phase 4)</h3>
            <div class="evidence">
                <label><input type="checkbox" data-evidence="4.1"> Study results dashboard screenshot</label><br>
                <label><input type="checkbox" data-evidence="4.2"> Individual response details</label><br>
                <label><input type="checkbox" data-evidence="4.3"> Aggregated data view (if available)</label><br>
                <label><input type="checkbox" data-evidence="4.4"> Export functionality screenshot</label><br>
                <label><input type="checkbox" data-evidence="4.5"> Response accuracy verification</label><br>
            </div>
            
            <textarea class="notes" placeholder="Phase 4 notes, data analysis observations..."></textarea>
        </div>

        <!-- FINAL RESULTS -->
        <div class="phase" id="finalResults">
            <h2>üéØ FINAL TEST RESULTS</h2>
            
            <div class="metrics">
                <div class="metric">
                    <div class="metric-value" id="totalTime">00:00:00</div>
                    <div>Total Test Time</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="completionRate">0%</div>
                    <div>Completion Rate</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="evidenceCount">0/20</div>
                    <div>Evidence Captured</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="overallScore">-</div>
                    <div>Overall Score</div>
                </div>
            </div>
            
            <h3>Core Functionality Assessment</h3>
            <div class="checklist">
                <label><input type="checkbox" data-final="core1"> ‚úÖ Complete study creation and launch workflow</label><br>
                <label><input type="checkbox" data-final="core2"> ‚úÖ Participant can discover and apply to studies</label><br>
                <label><input type="checkbox" data-final="core3"> ‚úÖ Participant can complete full study experience</label><br>
                <label><input type="checkbox" data-final="core4"> ‚úÖ Responses captured accurately and completely</label><br>
                <label><input type="checkbox" data-final="core5"> ‚úÖ Researcher can access and analyze response data</label><br>
            </div>
            
            <h3>Business Readiness Assessment</h3>
            <div>
                <label>Ready for Production: 
                    <select id="productionReady">
                        <option value="">Select...</option>
                        <option value="yes">YES</option>
                        <option value="conditional">CONDITIONAL</option>
                        <option value="no">NO</option>
                    </select>
                </label><br><br>
                
                <label>Core Value Delivered: 
                    <select id="coreValue">
                        <option value="">Select...</option>
                        <option value="yes">YES</option>
                        <option value="no">NO</option>
                    </select>
                </label><br><br>
                
                <label>Launch Confidence (1-10): 
                    <input type="range" id="launchConfidence" min="1" max="10" value="5">
                    <span id="confidenceValue">5</span>/10
                </label>
            </div>
            
            <h3>Overall Test Summary</h3>
            <textarea class="notes" id="finalSummary" placeholder="Overall test assessment, critical findings, and recommendations..."></textarea>
            
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="generateReport()" style="font-size: 18px; padding: 15px 30px;">üìä Generate Final Report</button>
            </div>
        </div>
    </div>

    <script>
        // Test execution tracking
        let testStartTime = null;
        let phaseStartTimes = {};
        let phaseEndTimes = {};
        
        // Start overall timer
        function startOverallTimer() {
            if (!testStartTime) {
                testStartTime = new Date();
                updateTimers();
            }
        }
        
        // Update timers
        function updateTimers() {
            if (testStartTime) {
                const elapsed = new Date() - testStartTime;
                document.getElementById('overallTimer').textContent = 
                    `Overall Test Time: ${formatTime(elapsed)}`;
            }
            
            // Update phase timers
            Object.keys(phaseStartTimes).forEach(phase => {
                const startTime = phaseStartTimes[phase];
                const endTime = phaseEndTimes[phase] || new Date();
                const elapsed = endTime - startTime;
                document.getElementById(`${phase}Timer`).textContent = 
                    `Phase ${phase.slice(-1)} Time: ${formatTime(elapsed)}`;
                document.getElementById(`${phase}Time`).textContent = formatTime(elapsed, true);
            });
            
            setTimeout(updateTimers, 1000);
        }
        
        // Format time display
        function formatTime(milliseconds, short = false) {
            const seconds = Math.floor(milliseconds / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            
            if (short) {
                return `${minutes.toString().padStart(2, '0')}:${(seconds % 60).toString().padStart(2, '0')}`;
            }
            
            return `${hours.toString().padStart(2, '0')}:${(minutes % 60).toString().padStart(2, '0')}:${(seconds % 60).toString().padStart(2, '0')}`;
        }
        
        // Phase management
        function startPhase(phaseNumber) {
            startOverallTimer();
            const phaseId = `phase${phaseNumber}`;
            phaseStartTimes[phaseId] = new Date();
            
            // Update phase status
            document.getElementById(phaseId).classList.add('active');
            document.getElementById('overallStatus').textContent = `Phase ${phaseNumber} Active`;
            
            console.log(`üöÄ Phase ${phaseNumber} started at ${new Date().toLocaleTimeString()}`);
        }
        
        function completePhase(phaseNumber) {
            const phaseId = `phase${phaseNumber}`;
            phaseEndTimes[phaseId] = new Date();
            
            // Update phase status
            const phaseElement = document.getElementById(phaseId);
            phaseElement.classList.remove('active');
            phaseElement.classList.add('completed');
            
            console.log(`‚úÖ Phase ${phaseNumber} completed at ${new Date().toLocaleTimeString()}`);
            
            // Check if all phases complete
            if (phaseNumber === 4) {
                document.getElementById('overallStatus').textContent = 'Test Complete';
                updateFinalMetrics();
            }
        }
        
        // Update final metrics
        function updateFinalMetrics() {
            // Calculate completion rate
            const totalCheckboxes = document.querySelectorAll('input[type="checkbox"]').length;
            const checkedBoxes = document.querySelectorAll('input[type="checkbox"]:checked').length;
            const completionRate = Math.round((checkedBoxes / totalCheckboxes) * 100);
            
            document.getElementById('completionRate').textContent = `${completionRate}%`;
            
            // Calculate evidence count
            const evidenceCheckboxes = document.querySelectorAll('input[data-evidence]').length;
            const evidenceChecked = document.querySelectorAll('input[data-evidence]:checked').length;
            document.getElementById('evidenceCount').textContent = `${evidenceChecked}/${evidenceCheckboxes}`;
            
            // Calculate overall score
            const coreChecked = document.querySelectorAll('input[data-final]:checked').length;
            const coreTotal = document.querySelectorAll('input[data-final]').length;
            const overallScore = Math.round((coreChecked / coreTotal) * 100);
            document.getElementById('overallScore').textContent = `${overallScore}%`;
            
            // Update total time
            if (testStartTime) {
                const totalElapsed = new Date() - testStartTime;
                document.getElementById('totalTime').textContent = formatTime(totalElapsed);
            }
        }
        
        // Generate final report
        function generateReport() {
            updateFinalMetrics();
            
            const report = {
                testDate: new Date().toISOString(),
                totalTime: document.getElementById('totalTime').textContent,
                completionRate: document.getElementById('completionRate').textContent,
                evidenceCount: document.getElementById('evidenceCount').textContent,
                overallScore: document.getElementById('overallScore').textContent,
                productionReady: document.getElementById('productionReady').value,
                coreValue: document.getElementById('coreValue').value,
                launchConfidence: document.getElementById('launchConfidence').value,
                studyUrl: document.getElementById('studyUrl').value,
                applicationId: document.getElementById('applicationId').value,
                finalSummary: document.getElementById('finalSummary').value,
                phases: {}
            };
            
            // Collect phase data
            ['phase1', 'phase2', 'phase3', 'phase4'].forEach(phaseId => {
                const startTime = phaseStartTimes[phaseId];
                const endTime = phaseEndTimes[phaseId];
                report.phases[phaseId] = {
                    startTime: startTime ? startTime.toISOString() : null,
                    endTime: endTime ? endTime.toISOString() : null,
                    duration: startTime && endTime ? endTime - startTime : null
                };
            });
            
            console.log('üìä FINAL TEST REPORT:', report);
            
            // Download report as JSON
            const dataStr = JSON.stringify(report, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `core-lifecycle-test-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('üìä Test report generated and downloaded!');
        }
        
        // Update confidence value display
        document.getElementById('launchConfidence').addEventListener('input', function() {
            document.getElementById('confidenceValue').textContent = this.value;
        });
        
        // Auto-save checkbox states
        document.addEventListener('change', function(e) {
            if (e.target.type === 'checkbox') {
                updateFinalMetrics();
            }
        });
        
        // Start timers
        updateTimers();
        
        console.log('üîÑ Core Study Lifecycle Test interface ready');
        console.log('üìã Use the interface above to systematically execute the test');
        console.log('üåê Platform URL: https://researchhub-saas.vercel.app');
    </script>
</body>
</html>
